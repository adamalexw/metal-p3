<mat-card class="hover:bg-background hover:shadow-2xl" appearance="raised">
  <mat-card-header class="py-2">
    <mat-card-title
      ><p class="line-clamp-1">{{ album().artist }}</p></mat-card-title
    >
    <mat-card-subtitle (click)="openAlbum.emit(album().id)"
      ><p class="line-clamp-1 cursor-pointer">{{ album().album }}</p></mat-card-subtitle
    >
  </mat-card-header>

  <mat-card-content>
    <div class="my-2 flex cursor-pointer justify-center overflow-hidden" (click)="openAlbum.emit(album().id)">
      <app-cover
        class="z-10 block hover:scale-110 hover:transition"
        [class.animate-spin]="album().coverLoading"
        [cover]="album().cover"
        [coverError]="album().coverError"
        [loading]="album().coverLoading || false"
      />
    </div>
  </mat-card-content>

  <mat-card-footer class="flex h-12 w-full items-center px-4">
    <div class="grow truncate">{{ album().year }} - {{ album().genre }}</div>
    <button class="!p-0" [matMenuTriggerFor]="menu" mat-icon-button>
      <mat-icon>more_vert</mat-icon>
    </button>

    <mat-menu #menu="matMenu">
      <button (click)="transferAlbum.emit()" mat-menu-item>
        <mat-icon>adb</mat-icon>
        <span>Transfer</span>
      </button>
      <button (click)="playAlbum.emit()" mat-menu-item>
        <mat-icon>playlist_play</mat-icon>
        <span>Play</span>
      </button>
      <button (click)="addToPlaylist.emit()" mat-menu-item>
        <mat-icon>playlist_add</mat-icon>
        <span>Add To Playlist</span>
      </button>
      <button (confirmResult)="onDelete($event)" mat-menu-item appConfirmDelete itemName="album">
        <mat-icon>delete</mat-icon>
        <span>Delete</span>
      </button>
    </mat-menu>
  </mat-card-footer>
</mat-card>
