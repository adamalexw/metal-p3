<app-list-toolbar
  [folder]="searchRequestFolder$ | async"
  [searching]="albumsLoading$ | async"
  [creatingNew]="creatingNew$ | async"
  (advancedSearch)="onAdvancedSearch()"
  (searchRequest)="onSearch($event)"
  (showPlayer)="onShowPlayer()"
  (createNew)="onCreateNew()"
>
</app-list-toolbar>

<ng-container *ngIf="searchRequest$ | async as searchRequest">
  <cdk-virtual-scroll-viewport [itemSize]="379" (scrolledIndexChange)="scrollIndexChange($event, searchRequest, false)">
    <div class="mx-2" appAddAlbum (albumAdded)="onAlbumAdded($event)">
      <div class="grid grid-flow-col auto-cols-fr lg:auto-cols-min gap-2 py-2" *cdkVirtualFor="let albums of albumsView$; trackBy: trackByVirtualFn">
        <app-list-item
          *ngFor="let album of albums; trackBy: trackByAlbumFn"
          class="w-full lg:w-[275px]"
          [album]="album"
          (openAlbum)="onOpenAlbum($event)"
          (renameFolder)="onRenameFolder(album.id, album.fullPath, album.artist, album.album)"
          (transferAlbum)="onTransferAlbum(album.id, album.folder)"
          (playAlbum)="onPlayAlbum(album.id, album.folder)"
          (addToPlaylist)="onAddToPlaylist(album.id, album.folder)"
        ></app-list-item>
      </div>
    </div>
  </cdk-virtual-scroll-viewport>
</ng-container>
<footer class="fixed bottom-0 w-full" [class.footer-with-side-panel]="sideNavOpen$ | async">
  <app-player />
</footer>
