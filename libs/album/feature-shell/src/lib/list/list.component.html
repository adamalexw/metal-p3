<div class="flex flex-col min-h-screen">
  <app-list-toolbar
    [criteria]="criteria$ | async"
    [searching]="albumsLoading$ | async"
    [creatingNew]="creatingNew$ | async"
    (searchRequest)="onSearch($event)"
    (showPlayer)="onShowPlayer()"
    (createNew)="onCreateNew()"
  >
  </app-list-toolbar>

  <cdk-virtual-scroll-viewport itemSize="360" minBufferPx="1080" maxBufferPx="1800" (scrolledIndexChange)="scrollIndexChange($event, criteria)" class="flex-grow w-full">
    <div appAddAlbum (albumAdded)="onAlbumAdded($event)">
      <div class="flex flex-row flex-wrap" *cdkVirtualFor="let albums of albumsView$; trackBy: trackByVirtualFn">
        <app-list-item
          *ngFor="let album of albums; trackBy: trackByAlbumFn"
          class="p-2"
          [album]="album"
          (openAlbum)="onOpenAlbum($event)"
          (renameFolder)="onRenameFolder(album.id, album.fullPath, album.artist, album.album)"
          (transferAlbum)="onTransferAlbum(album.id, album.folder)"
          (playAlbum)="onPlayAlbum(album.id, album.folder)"
          (addToPlaylist)="onAddToPlaylist(album.id, album.folder)"
        ></app-list-item>
      </div>
    </div>
  </cdk-virtual-scroll-viewport>
  <footer>
    <app-player></app-player>
  </footer>
</div>
