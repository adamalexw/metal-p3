<ng-container *ngIf="playerOpen$ | async">
  <div [class]="divClass$ | async">
    <div class="flex w-full static">
      <app-cover [cover]="cover$ | async" [width]="coverSize$ | async" [height]="coverSize$ | async"></app-cover>

      <app-player-controls
        [footerMode]="footerMode$ | async"
        [isFirstItemPlaying]="isFirstItemPlaying$ | async"
        [isLastItemPlaying]="isLastItemPlaying$ | async"
        [currentItem]="activeItem$ | async"
        [elapsedTime]="elapsedTime$ | async"
        [toggleIcon]="toggleIcon$ | async"
        (playItem)="onPlay()"
        (pauseItem)="onPause()"
        (seekTo)="onSeekTo($event)"
        (previous)="onPrevious()"
        (next)="onNext()"
        (volume)="onVolume($event)"
        (mute)="onVolume(0)"
        (toggleView)="onToogleView()"
      ></app-player-controls>
    </div>

    <ng-container *ngIf="(footerMode$ | async) === false">
      <app-playlist-shell [duration]="playlistDuration$ | async" (clearPlaylist)="onClearPlaylist()" (closePlaylist)="onClosePlaylist()"></app-playlist-shell>
      <app-playlist
        [playlist]="playlist$ | async"
        [currentItem]="activeItem$ | async"
        (playItem)="onPlayItem($event)"
        (pauseItem)="onPause()"
        (resumeItem)="onPlay()"
        (removeItem)="onRemove($event)"
        (reorder)="onReorder($event)"
      ></app-playlist>
    </ng-container>
  </div>
</ng-container>

<audio #audio autoplay></audio>
