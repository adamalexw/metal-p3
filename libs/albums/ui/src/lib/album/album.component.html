<ng-container *ngIf="album">
  <nav>
    <app-album-toolbar
      [saving]="albumSaving"
      [findingUrl]="findingUrl"
      [renamingTracks]="renamingTracks"
      [gettingLyrics]="gettingLyrics"
      (save)="onSave()"
      (imageSearch)="onImageSearch()"
      (findUrl)="onFindUrl()"
      (maTracks)="onMaTracks()"
      (renameTracks)="onRenameTracks()"
      (lyrics)="onLyrics()"
      (openFolder)="openFolder.emit(album.fullPath)"
      (refreshTracks)="refreshTracks.emit({ id: album.id, folder: album.folder })"
    ></app-album-toolbar>
  </nav>
  <form [formGroup]="form" autocomplete="off">
    <section class="flex flex-row">
      <app-cover [loading]="coverLoading" [cover]="album.cover" width="500" height="500" (coverUrl)="coverUrl.emit({ id: album.id, url: $event })"></app-cover>
      <mat-list class="m-2 summary-list">
        <mat-list-item class="mb-2">
          <mat-form-field class="w-full">
            <mat-label>Band</mat-label>
            <input matInput formControlName="artist" />
          </mat-form-field>
        </mat-list-item>
        <mat-list-item class="my-2">
          <mat-form-field class="w-full">
            <mat-label>Album</mat-label>
            <input matInput formControlName="album" />
          </mat-form-field>
        </mat-list-item>
        <mat-list-item class="my-2">
          <mat-form-field class="w-full">
            <mat-label>Genre</mat-label>
            <input matInput formControlName="genre" />
            <mat-icon *ngIf="artistUrl" matSuffix (click)="getBandProps(artistUrl)">music_note</mat-icon>
          </mat-form-field>
        </mat-list-item>
        <mat-list-item class="my-2">
          <mat-form-field class="w-full">
            <mat-label>Country</mat-label>
            <input matInput formControlName="country" />
            <mat-icon *ngIf="artistUrl" matSuffix (click)="getBandProps(artistUrl)">flag</mat-icon>
          </mat-form-field>
        </mat-list-item>
        <mat-list-item class="my-2">
          <mat-form-field class="w-full">
            <mat-label>Album Url</mat-label>
            <input matInput formControlName="albumUrl" />
            <mat-icon *ngIf="albumUrl" matSuffix (click)="openLink(albumUrl)">link</mat-icon>
          </mat-form-field>
        </mat-list-item>
        <mat-list-item class="my-2">
          <mat-form-field class="w-full">
            <mat-label>Artist Url</mat-label>
            <input matInput formControlName="artistUrl" />
            <mat-icon *ngIf="artistUrl" matSuffix (click)="openLink(artistUrl)">link</mat-icon>
          </mat-form-field>
        </mat-list-item>
        <mat-list-item class="mt-2">
          <mat-form-field class="w-10">
            <mat-label>Year</mat-label>
            <input matInput formControlName="year" />
          </mat-form-field>
        </mat-list-item>
        <mat-list-item>
          <mat-checkbox formControlName="transferred"> Transferred </mat-checkbox>
        </mat-list-item>
        <mat-list-item>
          <mat-checkbox formControlName="hasLyrics"> Lyrics </mat-checkbox>
        </mat-list-item>
      </mat-list>
    </section>

    <section class="mt-2 w-1/2">
      <app-tracks [form]="form" [tracksLoading]="tracksLoading" [tracks]="tracks"></app-tracks>
    </section>
  </form>
</ng-container>
